<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cycle de vie complet React 18 vs React 19</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 50px;
            font-size: 2.8em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .versions-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .version-column {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .version-title {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            font-size: 2em;
            font-weight: bold;
            color: white;
            position: relative;
        }

        .react18-title {
            background: linear-gradient(135deg, #61dafb, #0088cc);
        }

        .react19-title {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
        }

        .phase {
            margin-bottom: 25px;
            position: relative;
            padding-left: 50px;
        }

        .phase-number {
            position: absolute;
            left: 0;
            top: 0;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .phase-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid #667eea;
            transition: all 0.3s ease;
        }

        .phase-content:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .phase-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .phase-icon {
            font-size: 1.5em;
        }

        .phase-description {
            color: #666;
            margin-bottom: 12px;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .phase-timing {
            background: #fff3cd;
            border-left: 3px solid #ffc107;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.85em;
            color: #856404;
            margin-bottom: 10px;
        }

        .phase-code {
            background: #282c34;
            color: #abb2bf;
            padding: 12px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            overflow-x: auto;
            line-height: 1.5;
        }

        .hook-name {
            color: #61dafb;
            font-weight: bold;
        }

        .keyword {
            color: #c678dd;
        }

        .string {
            color: #98c379;
        }

        .comment {
            color: #5c6370;
            font-style: italic;
        }

        .arrow-connector {
            text-align: center;
            color: #667eea;
            font-size: 2.5em;
            margin: 15px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(10px);
            }
        }

        .new-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.7em;
            font-weight: bold;
            margin-left: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.08);
            }
        }

        .sub-phases {
            margin-top: 15px;
            padding-left: 20px;
            border-left: 2px dashed #ccc;
        }

        .sub-phase {
            margin-bottom: 15px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #764ba2;
        }

        .sub-phase-title {
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        .sub-phase-desc {
            color: #666;
            font-size: 0.85em;
            line-height: 1.4;
        }

        .comparison-note {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            color: #333;
        }

        .comparison-note-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #4a148c;
        }

        .legend-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            margin-top: 40px;
        }

        .legend-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .legend-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .legend-item-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .legend-item-desc {
            color: #666;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .flow-diagram {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            margin-top: 40px;
        }

        .flow-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
        }

        .flow-boxes {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .flow-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.1em;
            text-align: center;
            min-width: 300px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .flow-box:hover {
            transform: scale(1.05);
        }

        .flow-arrow-big {
            font-size: 2em;
            color: #667eea;
        }

        @media (max-width: 1200px) {
            .versions-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .version-title {
                font-size: 1.5em;
            }

            .phase-title {
                font-size: 1.1em;
            }
        }

        .strict-mode-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .strict-mode-warning-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .strict-mode-warning-desc {
            color: #856404;
            line-height: 1.6;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üîÑ Cycle de vie COMPLET des composants React</h1>

        <div class="versions-container">
            <!-- ==================== REACT 18 ==================== -->
            <div class="version-column">
                <div class="version-title react18-title">
                    ‚öõÔ∏è React 18
                </div>

                <!-- Phase 1: Lazy Loading / Code Splitting -->
                <div class="phase">
                    <div class="phase-number">1</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üì¶</span>
                            Lazy Loading / Code Splitting
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Avant le chargement du composant
                        </div>
                        <div class="phase-description">
                            Le composant est charg√© dynamiquement uniquement quand n√©cessaire
                        </div>
                        <div class="phase-code">
                            <span class="keyword">const</span> MonComposant = <span class="keyword">lazy</span>(<span
                                class="keyword">() =></span>
                            <span class="keyword">import</span>(<span class="string">'./MonComposant'</span>)
                            );

                            <span class="comment">// Utilisation avec Suspense</span>
                            &lt;<span class="keyword">Suspense</span> fallback={&lt;Loading /&gt;}&gt;
                            &lt;MonComposant /&gt;
                            &lt;/<span class="keyword">Suspense</span>&gt;
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 2: Render Phase -->
                <div class="phase">
                    <div class="phase-number">2</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">‚öôÔ∏è</span>
                            Render Phase (Phase de rendu)
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Avant toute modification du DOM
                        </div>
                        <div class="phase-description">
                            React calcule ce qui doit changer (PURE - peut √™tre interrompu)
                        </div>
                        <div class="sub-phases">
                            <div class="sub-phase">
                                <div class="sub-phase-title">2.1 - Appel de la fonction composant</div>
                                <div class="sub-phase-desc">React ex√©cute votre fonction/classe pour obtenir les
                                    √©l√©ments React</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">2.2 - Cr√©ation du Virtual DOM</div>
                                <div class="sub-phase-desc">Construction de l'arbre virtuel en m√©moire (pas encore dans
                                    le navigateur)</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">2.3 - Algorithme de Reconciliation</div>
                                <div class="sub-phase-desc">React compare le nouveau Virtual DOM avec l'ancien (diff
                                    algorithm)</div>
                            </div>
                        </div>
                        <div class="phase-code">
                            <span class="keyword">function</span> <span class="hook-name">MonComposant</span>() {
                            <span class="comment">// ‚úÖ Ex√©cut√© pendant la Render Phase</span>
                            <span class="keyword">const</span> [count, setCount] = <span
                                class="hook-name">useState</span>(<span class="string">0</span>);
                            <span class="keyword">const</span> double = count * <span class="string">2</span>; <span
                                class="comment">// Calculs purs</span>

                            <span class="keyword">return</span> &lt;div&gt;{count}&lt;/div&gt;;
                            }
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 3: Commit Phase -->
                <div class="phase">
                    <div class="phase-number">3</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üíæ</span>
                            Commit Phase (Phase de commit)
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Synchrone - ne peut pas √™tre interrompu
                        </div>
                        <div class="phase-description">
                            React applique les changements au DOM r√©el
                        </div>
                        <div class="sub-phases">
                            <div class="sub-phase">
                                <div class="sub-phase-title">3.1 - Mutation du DOM</div>
                                <div class="sub-phase-desc">React modifie le vrai DOM (appendChild, removeChild,
                                    setAttribute...)</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">3.2 - Mise √† jour des refs</div>
                                <div class="sub-phase-desc">Les refs pointent vers les √©l√©ments DOM r√©els</div>
                            </div>
                        </div>
                        <div class="phase-code">
                            <span class="comment">// React applique les changements au DOM:</span>
                            <span class="comment">// - Cr√©ation: document.createElement()</span>
                            <span class="comment">// - Suppression: element.remove()</span>
                            <span class="comment">// - Mise √† jour: element.textContent = ...</span>
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 4: useLayoutEffect -->
                <div class="phase">
                    <div class="phase-number">4</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üìè</span>
                            useLayoutEffect
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: SYNCHRONE - Apr√®s mutation DOM, AVANT paint
                        </div>
                        <div class="phase-description">
                            Ex√©cut√© avant que le navigateur ne dessine √† l'√©cran. Bloque le rendu visuel.
                        </div>
                        <div class="phase-code">
                            <span class="hook-name">useLayoutEffect</span>(<span class="keyword">() =></span> {
                            <span class="comment">// ‚ö†Ô∏è Code SYNCHRONE - Bloque le paint</span>
                            <span class="comment">// Utiliser pour les mesures DOM</span>
                            <span class="keyword">const</span> rect = ref.current.getBoundingClientRect();
                            setHeight(rect.height);

                            <span class="keyword">return () =></span> {
                            <span class="comment">// Nettoyage avant le prochain layout</span>
                            };
                            }, [deps]);
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 5: Browser Paint -->
                <div class="phase">
                    <div class="phase-number">5</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üé®</span>
                            Browser Paint (Peinture navigateur)
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Apr√®s useLayoutEffect
                        </div>
                        <div class="phase-description">
                            Le navigateur dessine les pixels √† l'√©cran (Layout ‚Üí Paint ‚Üí Composite)
                        </div>
                        <div class="sub-phases">
                            <div class="sub-phase">
                                <div class="sub-phase-title">5.1 - Layout (Reflow)</div>
                                <div class="sub-phase-desc">Le navigateur calcule la position et taille de chaque
                                    √©l√©ment</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">5.2 - Paint</div>
                                <div class="sub-phase-desc">Le navigateur dessine les pixels (couleurs, texte,
                                    images...)</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">5.3 - Composite</div>
                                <div class="sub-phase-desc">Les couches sont assembl√©es pour l'affichage final</div>
                            </div>
                        </div>
                        <div class="phase-code">
                            <span class="comment">// Processus navigateur (hors contr√¥le React):</span>
                            <span class="comment">// 1. Calcul des styles CSS</span>
                            <span class="comment">// 2. Calcul du layout (position/taille)</span>
                            <span class="comment">// 3. Paint (remplissage pixels)</span>
                            <span class="comment">// 4. Composite (assemblage couches)</span>
                            <span class="comment">// ‚úÖ L'utilisateur VOIT le changement</span>
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 6: useEffect -->
                <div class="phase">
                    <div class="phase-number">6</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">‚ö°</span>
                            useEffect
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: ASYNCHRONE - Apr√®s le paint (non-bloquant)
                        </div>
                        <div class="phase-description">
                            Ex√©cut√© apr√®s que l'utilisateur voit les changements. N'affecte pas le rendu visuel.
                        </div>
                        <div class="phase-code">
                            <span class="hook-name">useEffect</span>(<span class="keyword">() =></span> {
                            <span class="comment">// ‚úÖ Code ASYNCHRONE - N'bloque pas l'UI</span>
                            <span class="comment">// Parfait pour:</span>
                            <span class="comment">// - Appels API / fetch</span>
                            <span class="comment">// - Abonnements (WebSocket, √©v√©nements)</span>
                            <span class="comment">// - Timers (setTimeout, setInterval)</span>
                            <span class="comment">// - Logging, analytics</span>

                            fetchData().then(setData);

                            <span class="keyword">return () =></span> {
                            <span class="comment">// Nettoyage au d√©montage</span>
                            };
                            }, [deps]);
                        </div>
                    </div>
                </div>

                <div class="strict-mode-warning">
                    <div class="strict-mode-warning-title">
                        ‚ö†Ô∏è Strict Mode en d√©veloppement
                    </div>
                    <div class="strict-mode-warning-desc">
                        En mode d√©veloppement, React ex√©cute chaque composant <strong>2 fois</strong> pour d√©tecter les
                        effets de bord. C'est normal et n'arrive pas en production.
                        <br><br>
                        <strong>Ordre en Strict Mode:</strong><br>
                        1. Render ‚Üí Commit ‚Üí useLayoutEffect ‚Üí Paint ‚Üí useEffect<br>
                        2. <span style="color: #dc3545;">Cleanup useLayoutEffect ‚Üí Cleanup useEffect</span><br>
                        3. <span style="color: #28a745;">Render ‚Üí Commit ‚Üí useLayoutEffect ‚Üí Paint ‚Üí useEffect (2√®me
                            fois)</span>
                    </div>
                </div>

                <div class="comparison-note">
                    <div class="comparison-note-title">üìù R√©sum√© React 18</div>
                    <strong>Ordre complet:</strong><br>
                    1. Lazy Load (si n√©cessaire)<br>
                    2. Render Phase (Virtual DOM)<br>
                    3. Commit Phase (DOM r√©el)<br>
                    4. useLayoutEffect (synchrone)<br>
                    5. Browser Paint (l'utilisateur voit)<br>
                    6. useEffect (asynchrone)
                </div>
            </div>

            <!-- ==================== REACT 19 ==================== -->
            <div class="version-column">
                <div class="version-title react19-title">
                    ‚öõÔ∏è React 19
                </div>

                <!-- Phase 1: Lazy Loading -->
                <div class="phase">
                    <div class="phase-number">1</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üì¶</span>
                            Lazy Loading / Code Splitting
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Avant le chargement du composant
                        </div>
                        <div class="phase-description">
                            Identique √† React 18 + meilleure int√©gration avec Suspense
                        </div>
                        <div class="phase-code">
                            <span class="keyword">const</span> MonComposant = <span class="keyword">lazy</span>(<span
                                class="keyword">() =></span>
                            <span class="keyword">import</span>(<span class="string">'./MonComposant'</span>)
                            );

                            <span class="comment">// üÜï Meilleure gestion des erreurs</span>
                            &lt;<span class="keyword">Suspense</span> fallback={&lt;Loading /&gt;}&gt;
                            &lt;MonComposant /&gt;
                            &lt;/<span class="keyword">Suspense</span>&gt;
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 2: Render Phase -->
                <div class="phase">
                    <div class="phase-number">2</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">‚öôÔ∏è</span>
                            Render Phase
                            <span class="new-badge">‚ú® OPTIMIS√â</span>
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Avant modification du DOM
                        </div>
                        <div class="phase-description">
                            Identique √† React 18 + React Compiler (optimisation automatique)
                        </div>
                        <div class="sub-phases">
                            <div class="sub-phase">
                                <div class="sub-phase-title">2.1 - Appel fonction composant</div>
                                <div class="sub-phase-desc">üÜï React Compiler optimise automatiquement (plus besoin de
                                    useMemo/useCallback dans certains cas)</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">2.2 - Virtual DOM + use() hook</div>
                                <div class="sub-phase-desc">üÜï Le hook use() peut consommer des Promises pendant le
                                    rendu</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">2.3 - Reconciliation am√©lior√©e</div>
                                <div class="sub-phase-desc">Algorithme de diff plus performant</div>
                            </div>
                        </div>
                        <div class="phase-code">
                            <span class="keyword">function</span> <span class="hook-name">MonComposant</span>({
                            dataPromise }) {
                            <span class="comment">// üÜï use() pendant le rendu!</span>
                            <span class="keyword">const</span> data = <span class="hook-name">use</span>(dataPromise);

                            <span class="comment">// React Compiler optimise automatiquement</span>
                            <span class="keyword">const</span> double = data.count * <span class="string">2</span>;

                            <span class="keyword">return</span> &lt;div&gt;{double}&lt;/div&gt;;
                            }
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 3: Commit Phase -->
                <div class="phase">
                    <div class="phase-number">3</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üíæ</span>
                            Commit Phase
                            <span class="new-badge">‚ú® AM√âLIOR√â</span>
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Synchrone
                        </div>
                        <div class="phase-description">
                            Identique √† React 18 + gestion am√©lior√©e des actions de formulaire
                        </div>
                        <div class="sub-phases">
                            <div class="sub-phase">
                                <div class="sub-phase-title">3.1 - Mutation du DOM</div>
                                <div class="sub-phase-desc">Modifications DOM + üÜï ref comme prop normale (plus besoin
                                    de forwardRef)</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">3.2 - Mise √† jour des refs</div>
                                <div class="sub-phase-desc">refs mis √† jour + actions de formulaires d√©clench√©es</div>
                            </div>
                        </div>
                        <div class="phase-code">
                            <span class="comment">// üÜï ref comme prop normale</span>
                            <span class="keyword">function</span> <span class="hook-name">Input</span>({ ref }) {
                            <span class="keyword">return</span> &lt;input ref={ref} /&gt;;
                            }

                            <span class="comment">// üÜï Actions de formulaires natives</span>
                            &lt;form action={asyncSubmit}&gt;
                            ...
                            &lt;/form&gt;
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 4: useLayoutEffect -->
                <div class="phase">
                    <div class="phase-number">4</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üìè</span>
                            useLayoutEffect
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: SYNCHRONE - Avant paint
                        </div>
                        <div class="phase-description">
                            Identique √† React 18 (aucun changement)
                        </div>
                        <div class="phase-code">
                            <span class="hook-name">useLayoutEffect</span>(<span class="keyword">() =></span> {
                            <span class="comment">// Identique React 18</span>
                            <span class="comment">// Mesures DOM synchrones</span>
                            <span class="keyword">const</span> rect = ref.current.getBoundingClientRect();

                            <span class="keyword">return () =></span> {
                            <span class="comment">// Nettoyage</span>
                            };
                            }, [deps]);
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 5: Browser Paint -->
                <div class="phase">
                    <div class="phase-number">5</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">üé®</span>
                            Browser Paint
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: Apr√®s useLayoutEffect
                        </div>
                        <div class="phase-description">
                            Identique √† React 18 - Processus navigateur
                        </div>
                        <div class="sub-phases">
                            <div class="sub-phase">
                                <div class="sub-phase-title">5.1 - Layout</div>
                                <div class="sub-phase-desc">Calcul positions/tailles</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">5.2 - Paint</div>
                                <div class="sub-phase-desc">Dessin des pixels</div>
                            </div>
                            <div class="sub-phase">
                                <div class="sub-phase-title">5.3 - Composite</div>
                                <div class="sub-phase-desc">Assemblage final</div>
                            </div>
                        </div>
                        <div class="phase-code">
                            <span class="comment">// Identique React 18</span>
                            <span class="comment">// ‚úÖ L'utilisateur VOIT les changements</span>
                        </div>
                    </div>
                </div>

                <div class="arrow-connector">‚Üì</div>

                <!-- Phase 6: useEffect -->
                <div class="phase">
                    <div class="phase-number">6</div>
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-icon">‚ö°</span>
                            useEffect
                            <span class="new-badge">‚ú® + NOUVEAUX HOOKS</span>
                        </div>
                        <div class="phase-timing">
                            ‚è±Ô∏è Timing: ASYNCHRONE - Apr√®s paint
                        </div>
                        <div class="phase-description">
                            Identique √† React 18 + nouveaux hooks pour cas sp√©cifiques
                        </div>
                        <div class="phase-code">
                            <span class="comment">// Traditionnel (identique R18)</span>
                            <span class="hook-name">useEffect</span>(<span class="keyword">() =></span> {
                            fetchData().then(setData);
                            <span class="keyword">return () =></span> cleanup();
                            }, [deps]);

                            <span class="comment">// üÜï useFormStatus dans composants enfants</span>
                            <span class="keyword">const</span> { pending } = <span
                                class="hook-name">useFormStatus</span>();

                            <span class="comment">// üÜï useOptimistic pour UX optimiste</span>
                            <span class="keyword">const</span> [optimistic, add] =
                            <span class="hook-name">useOptimistic</span>(state, updater);
                        </div>
                    </div>
                </div>

                <div class="strict-mode-warning">
                    <div class="strict-mode-warning-title">
                        ‚ö†Ô∏è Strict Mode (identique React 18)
                    </div>
                    <div class="strict-mode-warning-desc">
                        En d√©veloppement, double ex√©cution pour d√©tecter les bugs. Comportement identique √† React 18.
                    </div>
                </div>

                <div class="comparison-note">
                    <div class="comparison-note-title">üìù R√©sum√© React 19</div>
                    <strong>Cycle de vie identique √† React 18 avec:</strong><br>
                    ‚ú® React Compiler (optimisation auto)<br>
                    ‚ú® use() hook (Promises pendant render)<br>
                    ‚ú® useFormStatus() (√©tat formulaires)<br>
                    ‚ú® useOptimistic() (UI optimiste)<br>
                    ‚ú® ref comme prop normale<br>
                    ‚ú® Actions de formulaires natives
                </div>
            </div>
        </div>

        <!-- LEGEND SECTION -->
        <div class="legend-section">
            <div class="legend-title">üìö Guide d√©taill√© des phases</div>

            <div class="legend-grid">
                <div class="legend-item" style="border-left-color: #61dafb;">
                    <div class="legend-item-title">‚öôÔ∏è Render Phase (Pure)</div>
                    <div class="legend-item-desc">
                        <strong>Caract√©ristiques:</strong><br>
                        ‚Ä¢ Peut √™tre interrompue par React<br>
                        ‚Ä¢ Aucun effet de bord autoris√©<br>
                        ‚Ä¢ Calculs en m√©moire uniquement<br>
                        ‚Ä¢ Cr√©e le Virtual DOM<br>
                        <br>
                        <strong>‚ö†Ô∏è √Ä √âVITER:</strong><br>
                        ‚Ä¢ Modifier le DOM directement<br>
                        ‚Ä¢ Appeler des APIs<br>
                        ‚Ä¢ Modifier des variables globales
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #764ba2;">
                    <div class="legend-item-title">üíæ Commit Phase (Mutation)</div>
                    <div class="legend-item-desc">
                        <strong>Caract√©ristiques:</strong><br>
                        ‚Ä¢ Synchrone et non-interruptible<br>
                        ‚Ä¢ Modifie le vrai DOM<br>
                        ‚Ä¢ Met √† jour les refs<br>
                        <br>
                        <strong>Ce qui se passe:</strong><br>
                        ‚Ä¢ React applique tous les changements<br>
                        ‚Ä¢ Le DOM est modifi√© mais pas encore visible<br>
                        ‚Ä¢ Les refs pointent vers les vrais √©l√©ments
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #ffc107;">
                    <div class="legend-item-title">üìè useLayoutEffect</div>
                    <div class="legend-item-desc">
                        <strong>Quand l'utiliser:</strong><br>
                        ‚Ä¢ Mesures DOM (getBoundingClientRect)<br>
                        ‚Ä¢ Animations critiques<br>
                        ‚Ä¢ Modifications DOM avant affichage<br>
                        <br>
                        <strong>‚ö†Ô∏è Attention:</strong><br>
                        ‚Ä¢ Bloque l'affichage (synchrone)<br>
                        ‚Ä¢ Peut causer des ralentissements<br>
                        ‚Ä¢ Pr√©f√©rer useEffect dans 95% des cas
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #28a745;">
                    <div class="legend-item-title">‚ö° useEffect</div>
                    <div class="legend-item-desc">
                        <strong>Quand l'utiliser:</strong><br>
                        ‚Ä¢ Appels API / fetch<br>
                        ‚Ä¢ Abonnements (WebSocket, events)<br>
                        ‚Ä¢ Timers (setTimeout, setInterval)<br>
                        ‚Ä¢ Analytics, logging<br>
                        ‚Ä¢ Tout effet non-critique<br>
                        <br>
                        <strong>‚úÖ Avantages:</strong><br>
                        ‚Ä¢ N'bloque pas l'UI<br>
                        ‚Ä¢ L'utilisateur voit les changements imm√©diatement
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #dc3545;">
                    <div class="legend-item-title">üé® Browser Paint</div>
                    <div class="legend-item-desc">
                        <strong>Processus navigateur:</strong><br>
                        1. <strong>Style</strong>: Calcul CSS<br>
                        2. <strong>Layout</strong>: Position/taille √©l√©ments<br>
                        3. <strong>Paint</strong>: Remplissage pixels<br>
                        4. <strong>Composite</strong>: Assemblage couches<br>
                        <br>
                        <strong>‚è±Ô∏è Performance:</strong><br>
                        ‚Ä¢ useLayoutEffect retarde cette √©tape<br>
                        ‚Ä¢ useEffect la laisse se produire naturellement
                    </div>
                </div>

                <div class="legend-item" style="border-left-color: #f5576c;">
                    <div class="legend-item-title">üÜï Nouveaut√©s React 19</div>
                    <div class="legend-item-desc">
                        <strong>use():</strong> Consommer Promises/Context<br>
                        <strong>useFormStatus():</strong> √âtat formulaires<br>
                        <strong>useOptimistic():</strong> UI optimiste<br>
                        <strong>Actions:</strong> Formulaires async natifs<br>
                        <strong>ref prop:</strong> Plus besoin forwardRef<br>
                        <strong>Compiler:</strong> Optimisation auto<br>
                        <br>
                        <strong>‚úÖ R√©trocompatibilit√© totale!</strong>
                    </div>
                </div>
            </div>
        </div>

        <!-- FLOW DIAGRAM -->
        <div class="flow-diagram">
            <div class="flow-title">üîÑ Flux visuel simplifi√©</div>
            <div class="flow-boxes">
                <div class="flow-box">1Ô∏è‚É£ Lazy Load (si n√©cessaire)</div>
                <div class="flow-arrow-big">‚Üì</div>
                <div class="flow-box">2Ô∏è‚É£ Render Phase (Virtual DOM)</div>
                <div class="flow-arrow-big">‚Üì</div>
                <div class="flow-box">3Ô∏è‚É£ Commit Phase (Mutation DOM)</div>
                <div class="flow-arrow-big">‚Üì</div>
                <div class="flow-box">4Ô∏è‚É£ useLayoutEffect (SYNCHRONE)</div>
                <div class="flow-arrow-big">‚Üì</div>
                <div class="flow-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                    5Ô∏è‚É£ Browser Paint<br>
                    <span style="font-size: 0.9em;">üëÅÔ∏è L'UTILISATEUR VOIT LES CHANGEMENTS</span>
                </div>
                <div class="flow-arrow-big">‚Üì</div>
                <div class="flow-box">6Ô∏è‚É£ useEffect (ASYNCHRONE)</div>
            </div>
        </div>

        <!-- COMPARISON TABLE -->
        <div class="legend-section">
            <div class="legend-title">‚öñÔ∏è useLayoutEffect vs useEffect</div>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #667eea; color: white;">
                        <th style="padding: 15px; text-align: left; border: 1px solid #ddd;">Crit√®re</th>
                        <th style="padding: 15px; text-align: left; border: 1px solid #ddd;">useLayoutEffect</th>
                        <th style="padding: 15px; text-align: left; border: 1px solid #ddd;">useEffect</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">Timing</td>
                        <td style="padding: 12px; border: 1px solid #ddd; background: #fff3cd;">AVANT le paint
                            (synchrone)</td>
                        <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">APR√àS le paint
                            (asynchrone)</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">Bloque l'UI</td>
                        <td style="padding: 12px; border: 1px solid #ddd; background: #f8d7da;">‚úÖ OUI - Retarde
                            l'affichage</td>
                        <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">‚ùå NON - N'bloque pas
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">Cas d'usage</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">Mesures DOM, animations critiques</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">API, abonnements, timers, analytics</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">Performance</td>
                        <td style="padding: 12px; border: 1px solid #ddd; background: #f8d7da;">‚ö†Ô∏è Peut ralentir le
                            rendu</td>
                        <td style="padding: 12px; border: 1px solid #ddd; background: #d4edda;">‚úÖ Optimal pour l'UX</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold;">Fr√©quence d'usage</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">5% des cas</td>
                        <td style="padding: 12px; border: 1px solid #ddd;">95% des cas</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>

</html>